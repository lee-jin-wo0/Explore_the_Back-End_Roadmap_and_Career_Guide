# 11.3 도커 파일 생성 및 서버 세팅하기

## 11.3.1 도커 파일 작성하기

스프링 부트 웹 애플리케이션을 컨테이너 환경에서 실행하려면 도커 파일을 작성해야 함.

도커파일은 도커 이미지를 생성하기 위한 설정 정보를 담은 텍스트 파일로, 스프링 부트 프로젝트의 루트 디렉터리(src)에 **Dockerfile**이라는 이름으로만듬. 

<br />

:small_blue_diamond: FROM : 자바 17(eclipse-temurin 17 JDK)을 기반으로 하는 자바 웹 애플리케이션을 컨테이너화함.

:small_blue_diamond: CMD : 컨테이너가 시작될 때 실행할 명령어를 정의.

:small_blue_diamond: APG : 도커 이미지를 빌드할 때 전달할 인수를 정의.

:small_blue_diamond: COPY : 호스트에서 컨테이너로 파일을 복사.

:small_blue_diamond: ENTRYPOINT : 컨테이너가 시작될 때 실행될 기본 실행 파일을 정의.

<br />

## 11.3.2 AWS 서버 세팅하기

깃허브에 업로드한 웹 애플리케이션을 클라우드 서버에 배포하기 위해 **AWS 엘라스틱 빈스톡(EB, Elastic Beanstalk)** 서비스를 이용.

엘라스틱 빈스톡은 AWS에서 웹 애플리케이션을 개발, 배포, 관리하기 위한 PaaS임.

<br />

:spiral_notepad: 엘라스틱 빈스톡의 특징.

:small_blue_diamond: 웹 애플리케이션을 실행하는 데 필요한 인프라를 자동으로 프로비저닝함. 개발자는 엘라스틱 빈스톡에서 서버 인스턴스, 로드 밸런서, 데이터베이스 등과 같은 컴포넌트를 선택할 수 있음.

:small_blue_diamond: 웹 애플리케이션을 실행하는 데 필요한 환경, 즉 컨테이너 실행 환경을 제공함. 엘라스틱 빈스톡을 이용하면 웹 애플리케이션이 사용하는 개발 언어, 프레임워크, 웹 서버, 데이터베이스와 로그 파일 위치 등을 설정할 수 있음.

:small_blue_diamond: 배포 프로세스를 자동화해 개발자가 쉽게 웹 애플리케이션을 배포할 수 잇도록 지원하는데, 이는 CD 기능을 포함하고 있다는 뜻임. 웹 애플리케이션의 코드를 압축하고, 배포하고, 구성을 업데이트하며, 필요에 따라 서버의 규모를 조정하는 스케일링을 관리.

:small_blue_diamond: 웹 애플리케이션의 모니터링과 로그 수집 기능을 제공. 개발자는 엘라스틱 빈스톡 콘솔에서 웹 애플리케이션의 상태와 성능을 모니터링하고 로그를 볼 수 있음.

:small_blue_diamond: 다른 AWS 서비스와 통합할 수 있음. Amazon RDS와 통합해 데이터베이스를 프로비저닝하고 웹 애플리케이션에 연결할 수 있으며, Amazon S3와 통합해 웹 애플리케이션에 대한 정적 파일을 호스팅할 수도 있음.

<br />

엘라스틱 빈스톡 서비스는 AWS 사이트의 검색창에서 Elastic Beanstalk을 검색해 이용할 수 있음.

<br />

:spiral_notepad: 엘라스틱 빈스톡 애플리케이션 6단계

:one: 환경 구성

:two: 서비스 액세스 구성

:three: 네트워킹, 데이터베이스 및 태그 설정

:four: 인스턴스 트래픽 및 크기 조정 구성

:five: 업데이트, 모니터링 및 로깅 구성

:six: 검토

<br />

## 11.3.3 AWS 인증 키 발급받기

같은 AWS 서비스가 아닌 외부의 깃허브 액션에서 AWS 서비스에 명령을 내리려면 권한을 받아야 함(IAM 서비스를 이용).

AWS사이트에서 IAM을 검색해 IAM 대시보드에 들어가서 [액세스 관리]-[사용자] 메뉴의 [사용자 생성] 버튼을 클릭해 액세스 키와 비밀 액세스 키를 발급 받음.