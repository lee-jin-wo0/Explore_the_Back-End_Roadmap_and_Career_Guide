# 11.4 CI/CD 파이프라인 구축및 배포하기

## 11.4.1 깃 허브 저장소에 환경 변수 등록하기

깃 허브에서 AWS 서비스에 접근하려면 AWS IAM 액세스 키와 비밀 액세스 키를 등록해야함.

깃 허브에서 도커 허브에 접근하려면 도커 허브의 아이디와 비밀번호도 등록해야 함.

이를 `환경 변수를 등록한다` 고 일컫음.

<br />

## 11.4.2 워크플로 파일 작성하기

깃허브 액션은 깃허브 저장소의 .github/workflows 디렉터리에 워크플로, 즉 작업 흐름을 정의.

깃허브 저장소에서 일어나는 다양한 이벤트에 알아서 반응하도록 빌드, 테스트, 배포 등의 단계를 명시하고, 웹 애플리케이션이 실행되는 조건과 이벤트를 지정.

워크플로 파일은 YAML(*.yml) 구문으로 작성.

<br />

## 11.4.3 Dockerrun.aws.json 파일 작성하기

깃허브 액션을 통해 도커 이미지를 도커 허브로 업로드할(push) 때는 Dockerrun.aws.json 파일을 작성.

엘라스틱 빈스톡에서 도커 컨테이너를 배포하기 위한 설정 파일로, 엘라스틱 빈스톡에 도커 이미지를 빌드하고 실행하는 방법에 관한 정보를 제공함.

도커 이미지, 환경 변수, 포트 번호, 자원 제한 등의 내용이 정의돼 있어 엘라스틱 빈스톡에서 도커 컨테이너를 쉽게 배포할 수 있음.

<br />

## 11.4.4 배포 확인하기

지정한 브랜치에 소스 코드를 추가하거나 수정하면 해당 소스 코드가 병합된 후 워크플로에 명시된 작업이 지정된 단계에 따라 자동으로 빌드-테스트-배포됨. 