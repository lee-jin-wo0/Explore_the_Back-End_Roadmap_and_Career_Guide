# 7.3 AWS 서버 구축 방법

AWS 서버 구축은 EC2 인스턴스 생성 :arrow_right: EC2 인스턴스 접속 :arrow_right: 웹 애플리케이션 배포 순으로 진행.

<br />

## 7.3.1 EC2 인스턴스 생성

 Amazon EC2 서비스를 이용하려면

:one: AWS 사이트에서 계정 생성

:two: 지역을 '아시아 태평양(서울)' 으로 변경.

:three: 검색창에서 'EC2'를 검색해 EC2 대시보드로 이동.

:four: [인스턴스 시작] 클릭 후 인스턴스 생성에 필요한 정보 입력.

<br />

인스턴스 생성은 

:one: 인스턴스 이름 입력

:two: 운영체제 선택

:three: 인스턴스 유형 선택

:four: 키 페어 생성

:five: 보안 그룹 설정 ​

:six: 스토리지 구성

순으로 진행.

<br />

:black_circle: 인스턴스 이름 입력 : 하나의 사용자 계정에 여러 개의 EC2 인스턴스 생성 가능. 인스턴스 생성 단계에서는 각각의 인스턴스를 구별할 수 있도록 고유한 이름을 설정.

:black_circle: 운영체제 선택 : 어떤 운영체제의 서버 컴퓨터를 사용할 것인지 결정. '프리 티어 사용 가능' 표시가 없는 운영체제 이미지를 선택하면 과금이 발생할 수 있음.

:black_circle: 인스턴스 유형 선택 : 인스턴스의 성능을 결정. **t2.micro**는 하나의 vCPU(가상 CPU)와 1Gib(1기비바이트, 1024^3바이트)의 메모리를 가진 인스턴스를 뜻함.

:black_circle: 키 페어 생성 : **키 페어(Key Pair)**란 암호화와 관련된 보안 시스템에서 사용하는 키로, 공개 키와 개인 키의 쌍으로 구성. 인증된 사용자가 EC2 인스턴스에 안전하게 접속하기 위해 사용하며, 해당 키 페어가 존재하는 경로에서만 EC2 인스턴스에 원격으로 접속할 수 있음. 새로이 키 페어를 생성하면 .pem 파일이 다운로드되며, 이 파일을 원격 접속을 수행할 로컬 컴퓨터의 특정 경로로 옮기면 키 페어로 원격 접속할 수 있음. 키 페어를 분실하면 동일한 키 페어를 다시 생성할 수 없음.

:black_circle: 보안 그룹 설정 : 보안 그룹은 EC2 인스턴스로 들어오는 트래픽 중 어떤 트래픽을 허용할 것인지 결정하는 단위. 보안 그룹을 생성할 때는 보안 그룹의 이름을 짓고 설명을 추가. 보안 그룹이 많으면 각 보안 그룹의 이름과 설명을 보고 구분할 수 있어야 관리하기에 편함. 새로 만든 보안 그룹에는 **인바운드(Inbound)** 규칙을 설정. 네트워크 보안 설정에서 사용되는 인바운드 규칙은 네트워크로 들어오는 트래픽에 대한 제어를 정의.

:black_circle: 스토리지 구성 : 서버 컴퓨터의 저장 용량을 설정. 프리 티어 무료 옵션에서는 최대 30GB까지 사용 가능.

<br />

## 7.3.2 EC2 인스턴스 접속

EC2 인스턴스에 웹 애플리케이션을 배포하려면 SSH 프로토콜을 사용해 EC2 인스턴스에 원격으로 접속한 후 웹 애플리케이션의 실행 환경을 구성해야함.

<br />

:black_circle: SSH 원격 접속

SSH는 네트워크를 통해 원격으로 다른 컴퓨터에 접속하기 위한 프로토콜.

대개 원격 서버에 로그인하거나 파일을 전송하는 데 사용.

SSH 클라이언트를 사용하려면 EC2 인스턴스에 원격으로 접속해 서버에 명령을 내리고 서버 내 파일에 접근할 수 있음.

:black_circle: 웹 애플리케이션 실행 환경 구성

EC2 인스턴스에서 웹 애플리케이션을 실행할 수 있도록 필요한 소프트웨어 패키지를 설치하는 과정.

웹 애플리케이션을 자바와 스프링 부트로 개발했다면 EC2 인스턴스에 JDK를 설치해야 함.

깃허브에 있는 소스 코드를 복제해 가져오려면 깃도 설치해야 함.

<br />

## 7.3.3 웹 애플리케이션 배포

웹 애플리케이션 실행 환경 구성을 마치면 원격 저장소의 소스 코드를 복제해 가져와 빌드한 후 실행.

<br />

:black_circle: 소스 코드 가져오기

깃이나 깃허브 같은 원격 저장소에 저장된 웹 애플리케이션의 소스 코드를 서버로 가져옴.

이때 깃 클라이언트나 SSH 명령어를 사용해 원격 저장소의 소스 코드를 복제해 가져옴.

:black_circle: 소스 코드 빌드

가져온 소스 코드를 빌드해 실행 가능한 상태의 웹 애플리케이션 또는 빌드 파일을 만듬.

이 단계에서는 빌드 도구인 메이븐(Maven)이나 그레이들(Gradle) 등을 사용해 파일 간 의존성을 고려해 소스 코드를 컴파일 및 패키징함.

:black_circle: 각종 설정 파일 수정

빌드된 웹 애플리케이션의 설정 파일을 수정.

이 단계에서는 웹 애플리케이션이 서버에서 원활하게 실행될 수 있도록 각종 설정을 확인 및 변경하고, 데이터베이스 연결 정보 등을 설정 파일에 반영.

:black_circle: 최종 실행

빌드된 웹 애플리케이션 또는 빌드 파일을 실행.

스프링 부트로 개발한 웹 애플리케이션의 경우 빌드 파일이 *.jar이므로 java -jar 빌드파일명.jar 과 같이 실행 명령을 내리면 웹 애플리케이션 배포가 마무리되고 서비스할 수 있는 상태가 됨.